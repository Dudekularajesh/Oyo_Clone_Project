{% extends "utils/base.html" %}

{% block start %}

<div class="container mt-5 pt-5 pb-5">

    <div class="row g-4">

        <!-- ===========================
             LEFT CARD — IMAGES
        ============================ -->
        <div class="col-md-6">
    <div class="card shadow">

        <div class="card-header bg-primary text-white">
            <h5 class="mb-0">Hotel Images</h5>
        </div>

        <div class="card-body">

            <!-- MAIN IMAGE -->
            <img id="main-image"
                 src="/media/{{ hotel.hotel_images.first.image }}"
                 class="img-fluid rounded mb-3"
                 style="height: 350px; width: 100%; object-fit: cover;"
                 alt="Main Image">

            <!-- THUMBNAILS -->
            <div class="d-flex flex-wrap gap-2 justify-content-start">
                {% for img in hotel.hotel_images.all %}
                    <img src="/media/{{ img.image }}"
                         onclick="changeImage(this.src)"
                         class="rounded border"
                         style="width: 90px; height: 90px; object-fit: cover; cursor: pointer;">
                {% endfor %}
            </div>

        </div>
    </div>
</div>


        <!-- ===========================
             RIGHT CARD — HOTEL DETAILS
        ============================ -->
        <div class="col-md-6">
            <div class="card shadow">

                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">Hotel Details</h5>
                </div>

                <div class="card-body">

                    <h3 class="fw-bold">{{ hotel.hotel_name }}</h3>
                    <p class="text-muted">{{ hotel.hotel_location }}</p>

                    <hr>

                    <!-- Amenities -->
                    <h6 class="fw-bold">Amenities</h6>
                    <div class="mb-3">
                        {% for a in hotel.ameneties.all %}
                            <span class="badge bg-primary me-1">{{ a.name }}</span>
                        {% endfor %}
                    </div>

                    <!-- Description -->
                    <h6 class="fw-bold">Hotel Description</h6>
                    <p class="mt-3">{{ hotel.hotel_description|safe }}</p>

                     <!-- Prices -->
                    <h6 class="fw-bold">Hotel Price</h6>
                    <h4 class="mt-3">
                        <span class="text-danger text-decoration-line-through">
                            ₹{{ hotel.hotel_price }}
                        </span>
                        <span class="text-success fw-bold ms-2">
                            ₹{{ hotel.hotel_offer_price }}
                        </span>
                    </h4>
<hr>
                    <!-- Booking Form -->
                    <h6 class="fw-bold">Book Your Date</h6>
                    {% if request.user.is_authenticated %}
                    <form method="POST" action="{% url 'create_booking' hotel.hotel_slug %}">
                        {% csrf_token %}
                        {% include "utils/alerts.html" %}
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label for="startDate" class="form-label">Start Date</label>
                                <input type="date" name="check_in" id="startDate" class="form-control" required>
                            </div>
                            <div class="col-md-6">
                                <label for="endDate" class="form-label">End Date</label>
                                <input type="date" name="check_out" id="endDate" class="form-control" required>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-danger w-100 mt-3">Book Now</button>
                    </form>

                    {% else %}
                    <a href="{% url 'login_page' %}" class="btn btn-success w-100">Login</a>
                    {% endif %}

                </div>
            </div>
        </div>

    </div>
</div>



<script>
function changeImage(src) {
    document.getElementById("main-image").src = src;
}
</script>

{% endblock %}
